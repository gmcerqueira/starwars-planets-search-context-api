(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{34:function(e,t,a){e.exports=a(46)},39:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(39),a(52)),o=a(51),i=Object(n.createContext)(),m=function(){var e=Object(n.useContext)(i).handleNameInput;return r.a.createElement(o.a,null,r.a.createElement(o.a.Group,null,r.a.createElement(o.a.Control,{placeholder:"Planet name","aria-label":"Planet name","aria-describedby":"Search by planet name",onChange:e,"data-testid":"name-filter"})))},s=a(48),d=function(){var e=Object(n.useContext)(i),t=e.saveFilter,a=e.returnAlreadyUsedFilter;Object(n.useEffect)((function(){}),[]);var l=function(e){return e.map((function(e){return r.a.createElement("option",{key:e[0],value:e[0]},e[1])}))},c=Object.entries({population:"Population",orbital_period:" Orbital period",diameter:"Diameter",rotation_period:"Rotation period",surface_water:"Surface water"}).filter((function(e){return a(e[0])})),u=Object.entries({"greater then":"greater then","less then":"less then","equals to":"equals to"}),m=Object(n.createRef)(),d=Object(n.createRef)(),f=Object(n.createRef)();return r.a.createElement(o.a,null,r.a.createElement(o.a.Group,{className:"mb-2"},r.a.createElement(o.a.Label,null,"Column"),r.a.createElement(o.a.Select,{ref:m,"aria-label":"Column filter select","data-testid":"column-filter"},l(c))),r.a.createElement(o.a.Group,{className:"mb-2"},r.a.createElement(o.a.Label,null,"Compare"),r.a.createElement(o.a.Select,{ref:d,"aria-label":"Comparasion filter select","data-testid":"comparison-filter"},l(u))),r.a.createElement(o.a.Group,{className:"mb-2"},r.a.createElement(o.a.Label,null,"Value"),r.a.createElement(o.a.Control,{type:"number",placeholder:"Value to compare","aria-label":"Value to compare","aria-describedby":"Value filter input",ref:f,"data-testid":"name-filter"})),r.a.createElement(s.a,{variant:"secondary","data-testid":"button-filter",onClick:function(){return t(m.current.value,d.current.value,f.current.value)}},"Add"))},f=(a(43),a(1)),E=a(12),p=function(){var e=Object(n.useContext)(i).setSort,t=Object(n.useState)({column:"name",sort:"ASC"}),a=Object(E.a)(t,2),l=a[0],c=a[1];return r.a.createElement(o.a.Group,null,r.a.createElement(o.a.Select,{"aria-label":"Column to sort","data-testid":"column-sort",onChange:function(e){var t,a=e.target.value;return t=a,void c(Object(f.a)(Object(f.a)({},l),{},{column:t}))}},Object.entries({name:"Name",population:"Population",orbital_period:" Orbital period",diameter:"Diameter",rotation_period:"Rotation period",surface_water:"Surface water"}).map((function(e){return r.a.createElement("option",{key:e[0],value:e[0]},e[1])}))),r.a.createElement("div",{className:"radioChange",onChange:function(e){var t,a=e.target.value;return t=a,void c(Object(f.a)(Object(f.a)({},l),{},{sort:t}))}},r.a.createElement(o.a.Check,{type:"radio",defaultChecked:!0,label:"Ascendente",value:"ASC",name:"formHorizontalRadios",id:"formHorizontalRadios1"}),r.a.createElement(o.a.Check,{type:"radio",label:"Descendente",value:"DESC",name:"formHorizontalRadios",id:"formHorizontalRadios2"})),r.a.createElement(s.a,{variant:"secondary",type:"button",onClick:function(){e(l)},"data-testid":"column-sort-button"},"Sort"))},b=function(){return r.a.createElement(u.a,{flush:!0},r.a.createElement(u.a.Item,{eventKey:"0"},r.a.createElement(u.a.Header,null,"Name"),r.a.createElement(u.a.Body,null,r.a.createElement(m,null))),r.a.createElement(u.a.Item,{eventKey:"1"},r.a.createElement(u.a.Header,null,"Comparison"),r.a.createElement(u.a.Body,null,r.a.createElement(d,null))),r.a.createElement(u.a.Item,{eventKey:"2"},r.a.createElement(u.a.Header,null,"Sort"),r.a.createElement(u.a.Body,null,r.a.createElement(p,null))))},v=a(49),h=a(31),C=function(){var e=Object(n.useContext)(i),t=e.filters.filterNumber,a=e.removeFilterNumber;return r.a.createElement("div",null,t.length>0&&r.a.createElement("div",null,r.a.createElement("h2",null,"Filters in use"),t.map((function(e,t){var n=e.column,l=e.comparison,c=e.value;return r.a.createElement("div",{key:n,"data-testid":"filter"},r.a.createElement(v.a,{bg:"secondary"},"".concat(n," ").concat(l," ").concat(c),r.a.createElement(h.a,{variant:"white",onClick:function(){return a(t)}})))}))))},j=a(50),y=a(53),O=function(){var e=Object(n.useContext)(i),t=e.data,a=e.filteringByName,l=e.returnFromFilter,c=e.filters.sort,u=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e.match(/\d*:\d*/)),r.a.createElement("div",null,e.match(/^\d*-\d*-\d*/)[0].split("-").reverse().join("/")))};return r.a.createElement("tbody",null,t&&t.filter((function(e){return a(e)})).filter((function(e){return l(e)})).sort((function(e,t){return"name"===c.column?function(e,t,a){var n=a.column,r=a.sort;if("ASC"===r){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}if("DESC"===r){if(e[n]>t[n])return-1;if(e[n]<t[n])return 1}}(e,t,c):function(e,t,a){var n=a.column,r=a.sort;if("ASC"===r){if(parseFloat(e[n])<parseFloat(t[n]))return-1;if(parseFloat(e[n])>parseFloat(t[n]))return 1}if("DESC"===r){if(parseFloat(e[n])>parseFloat(t[n]))return-1;if(parseFloat(e[n])<parseFloat(t[n]))return 1}}(e,t,c)})).map((function(e){var t=e.name,a=e.rotation_period,n=e.orbital_period,l=e.diameter,c=e.climate,o=e.gravity,i=e.terrain,m=e.surface_water,s=e.population,d=e.films,f=e.created,E=e.edited,p=e.url;return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-testid":"planet-name"},t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,m),r.a.createElement("td",null,s),r.a.createElement("td",null,d.map((function(e,t){return r.a.createElement(y.a,{key:t,variant:"dark",className:"my-2 p-2"},r.a.createElement(y.a.Link,{href:e,target:"_blank"},t+1))}))),r.a.createElement("td",null,u(f)),r.a.createElement("td",null,u(E)),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"dark",className:"my-1"},r.a.createElement(y.a.Link,{href:p,target:"_blank"},"Link"))))})))},k=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation period"),r.a.createElement("th",null,"Orbital period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"Url")))},S=function(){return r.a.createElement(j.a,{striped:!0,hover:!0,variant:"dark",className:"text-center text-capitalize align-middle overflow-auto my-0"},r.a.createElement(k,null),r.a.createElement(O,null))},N=a(26),g=a(25),F=a.n(g),w=a(32),x=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(E.a)(a,2),c=l[0],u=l[1],o=Object(n.useState)(""),m=Object(E.a)(o,2),s=m[0],d=m[1],f=Object(n.useState)([]),p=Object(E.a)(f,2),b=p[0],v=p[1],h=Object(n.useState)({column:"name",sort:"ASC"}),C=Object(E.a)(h,2),j=C[0],y=C[1],O=function(){var e=Object(w.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(e){return e.results}));case 3:t=e.sent,u(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){O()}),[]);var k={data:c,filters:{filterName:s,filterNumber:b,sort:j},setFilterName:d,handleNameInput:function(e){var t=e.target;d(t.value)},saveFilter:function(e,t,a){v([].concat(Object(N.a)(b),[{column:e,comparison:t,value:Number(a)}]))},filteringByName:function(e){return s?e.name.toLowerCase().includes(s.toLowerCase()):e},returnFromFilter:function(e){if(0===b.length)return e;var t=b[b.length-1],a=t.column,n=t.comparison,r=t.value,l=Number(e[a]);switch(n){case"greater then":return l>r;case"less then":return l<r;case"equals to":return l===r;default:return e}},returnAlreadyUsedFilter:function(e){return!b.reduce((function(e,t){return[].concat(Object(N.a)(e),[t.column])}),[]).includes(e)},removeFilterNumber:function(e){v(b.filter((function(t,a){return a!==e})))},setSort:y};return r.a.createElement(i.Provider,{value:k},t)};var R=function(){return r.a.createElement(x,null,r.a.createElement("div",{className:"text-center mt-3 mb-5"},r.a.createElement("h1",null,"START WARS"),r.a.createElement("h2",null,"Planets search")),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"w-25"},r.a.createElement(b,null),r.a.createElement(C,null)),r.a.createElement(S,null)))};a(45);c.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.4ebfc30c.chunk.js.map