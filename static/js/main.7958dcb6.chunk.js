(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),u=a.n(l),c=(a(15),Object(n.createContext)()),o=function(){var e=Object(n.useContext)(c).handleNameInput;return r.a.createElement("label",{htmlFor:"filterName"},"Name:",r.a.createElement("input",{type:"text",name:"filterName",id:"filterName",onChange:e,"data-testid":"name-filter"}))},i=function(){var e=Object(n.useContext)(c),t=e.saveFilter,a=e.returnAlreadyUsedFilter;Object(n.useEffect)((function(){}),[]);var l=function(e){return e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))},u=["population","orbital_period","diameter","rotation_period","surface_water"].filter((function(e){return a(e)})),o=Object(n.createRef)(),i=Object(n.createRef)(),m=Object(n.createRef)();return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"column-filter"},"Column:",r.a.createElement("select",{name:"column-filter",id:"column-filter",ref:o,"data-testid":"column-filter"},l(u))),r.a.createElement("label",{htmlFor:"comparison-filter"},"Comparison:",r.a.createElement("select",{name:"comparison-filter",id:"comparison-filter",ref:i,"data-testid":"comparison-filter"},l(["maior que","menor que","igual a"]))),r.a.createElement("label",{htmlFor:"value-filter"},"Value:",r.a.createElement("input",{type:"number",name:"value-filter",id:"value-filter",ref:m,"data-testid":"value-filter"})),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){return t(o.current.value,i.current.value,m.current.value)}},"Add filter"))},m=function(){return r.a.createElement("div",null,r.a.createElement(o,null),r.a.createElement(i,null))},s=a(3),f=a(1),d=function(){var e=Object(n.useContext)(c).setSort,t=Object(n.useState)({column:"name",sort:"ASC"}),a=Object(f.a)(t,2),l=a[0],u=a[1];return r.a.createElement("div",null,r.a.createElement("select",{name:"",id:"",onChange:function(e){var t,a=e.target.value;return t=a,void u(Object(s.a)(Object(s.a)({},l),{},{column:t}))},"data-testid":"column-sort"},Object.entries({name:"Name",population:"Population",orbital_period:" Orbital period",diameter:"Diameter",rotation_period:"Rotation period",surface_water:"Surface water"}).map((function(e){return r.a.createElement("option",{key:e[0],value:e[0]},e[1])}))),r.a.createElement("div",{className:"radioChange",onChange:function(e){var t,a=e.target.value;return t=a,void u(Object(s.a)(Object(s.a)({},l),{},{sort:t}))}},r.a.createElement("label",{htmlFor:"sortWay"},"ascendente",r.a.createElement("input",{defaultChecked:!0,type:"radio",name:"sortWay",id:"sortAsc",value:"ASC","data-testid":"column-sort-input-asc"})),r.a.createElement("label",{htmlFor:"sortWay"},"descendente",r.a.createElement("input",{type:"radio",name:"sortWay",id:"sortDesc",value:"DESC","data-testid":"column-sort-input-desc"}))),r.a.createElement("button",{type:"button",onClick:function(){e(l)},"data-testid":"column-sort-button"},"Sort"))},p=function(){var e=Object(n.useContext)(c),t=e.filters.filterNumber,a=e.removeFilterNumber;return r.a.createElement("div",null,t&&t.map((function(e,t){var n=e.column,l=e.comparison,u=e.value;return r.a.createElement("div",{key:n,"data-testid":"filter"},"".concat(n," ").concat(l," ").concat(u),r.a.createElement("button",{type:"button",onClick:function(){return a(t)}},"X"))})))},E=function(){var e=Object(n.useContext)(c),t=e.data,a=e.filteringByName,l=e.returnFromFilter,u=e.filters.sort,o=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e.match(/\d*:\d*/)),r.a.createElement("div",null,e.match(/^\d*-\d*-\d*/)[0].split("-").reverse().join("/")))};return r.a.createElement("tbody",null,t&&t.filter((function(e){return a(e)})).filter((function(e){return l(e)})).sort((function(e,t){return"name"===u.column?function(e,t,a){var n=a.column,r=a.sort;if("ASC"===r){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}if("DESC"===r){if(e[n]>t[n])return-1;if(e[n]<t[n])return 1}}(e,t,u):function(e,t,a){var n=a.column,r=a.sort;if("ASC"===r){if(parseFloat(e[n])<parseFloat(t[n]))return-1;if(parseFloat(e[n])>parseFloat(t[n]))return 1}if("DESC"===r){if(parseFloat(e[n])>parseFloat(t[n]))return-1;if(parseFloat(e[n])<parseFloat(t[n]))return 1}}(e,t,u)})).map((function(e){var t=e.name,a=e.rotation_period,n=e.orbital_period,l=e.diameter,u=e.climate,c=e.gravity,i=e.terrain,m=e.surface_water,s=e.population,f=e.films,d=e.created,p=e.edited,E=e.url;return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-testid":"planet-name"},t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,u),r.a.createElement("td",null,c),r.a.createElement("td",null,i),r.a.createElement("td",null,m),r.a.createElement("td",null,s),r.a.createElement("td",null,f.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("a",{href:e},"Filme ".concat(t+1)))}))),r.a.createElement("td",null,o(d)),r.a.createElement("td",null,o(p)),r.a.createElement("td",null,r.a.createElement("a",{href:E},"Link to ".concat(t))))})))},b=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation period"),r.a.createElement("th",null,"Orbital period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"Url")))},v=function(){return r.a.createElement("table",null,r.a.createElement(b,null),r.a.createElement(E,null))},h=a(6),j=a(5),O=a.n(j),C=a(9),F=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(f.a)(a,2),u=l[0],o=l[1],i=Object(n.useState)(""),m=Object(f.a)(i,2),s=m[0],d=m[1],p=Object(n.useState)([]),E=Object(f.a)(p,2),b=E[0],v=E[1],j=Object(n.useState)({column:"name",sort:"ASC"}),F=Object(f.a)(j,2),y=F[0],N=F[1],S=function(){var e=Object(C.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(e){return e.results}));case 3:t=e.sent,o(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S()}),[]);var k={data:u,filters:{filterName:s,filterNumber:b,sort:y},setFilterName:d,handleNameInput:function(e){var t=e.target;d(t.value)},saveFilter:function(e,t,a){v([].concat(Object(h.a)(b),[{column:e,comparison:t,value:Number(a)}]))},filteringByName:function(e){return s?e.name.toLowerCase().includes(s.toLowerCase()):e},returnFromFilter:function(e){if(0===b.length)return e;var t=b[b.length-1],a=t.column,n=t.comparison,r=t.value,l=Number(e[a]);switch(n){case"maior que":return l>r;case"menor que":return l<r;case"igual a":return l===r;default:return e}},returnAlreadyUsedFilter:function(e){return!b.reduce((function(e,t){return[].concat(Object(h.a)(e),[t.column])}),[]).includes(e)},removeFilterNumber:function(e){v(b.filter((function(t,a){return a!==e})))},setSort:N};return r.a.createElement(c.Provider,{value:k},t)};var y=function(){return r.a.createElement(F,null,r.a.createElement(m,null),r.a.createElement(p,null),r.a.createElement(d,null),r.a.createElement(v,null))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.7958dcb6.chunk.js.map